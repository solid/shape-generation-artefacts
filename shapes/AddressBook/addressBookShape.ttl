@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#> .
@prefix abs: <https://solid.github.io/shapes/addressBook#> .


# non-standard vcard extensions ref https://raw.githack.com/solid/contacts/refs/heads/main/vcard-extension-addressbook.ttl

abs:AddressBookShape a sh:NodeShape ;
    rdfs:label "AddressBook"@en;    
    sh:targetClass vcard:AddressBook ;
    rdfs:comment "Represents a collection of vCard people and/or vCard groups"@en ; 
    rdfs:comment "This class is not part of vCard as defined by the IETF"@en ;

    sh:property [
        rdfs:label "Formatted name"@en;
        sh:path vcard:fn ;
        sh:datatype xsd:string;
        sh:minCount 1;
  ];
  sh:property [
    rdfs:label "Name Email Index"@en ; 
    rdfs:comment "Links an AddressBook to a document containing Individuals that appear in it"@en ;
    rdfs:comment "This property is not part of vCard as defined by the IETF"@en ;
    sh:path vcard:nameEmailIndex ;
    sh:datatype xsd:anyURI; 
    sh:minCount 1;
  ];

  sh:property [
    rdfs:label "Group Index"@en ;
    rdfs:comment "Links an AddressBook to a document containing all its includesGroup properties"@en ;
    rdfs:comment "This property is not part of vCard as defined by the IETF"@en ;
    sh:path vcard:groupIndex ;
    sh:datatype xsd:anyURI; 
    a sh:FollowMe; # Loadme before continuing...
    sh:minCount 1;
    sh:maxCount 1;
  ] ;

  sh:property [
    rdfs:label "Includes Group"@en ;
    rdfs:comment "When included in the group index document of an AddressBook, adds the group to the AddressBook"@en ;
    rdfs:comment "This property is not part of vCard as defined by the IETF"@en ;
    sh:path vcard:includesGroup ;
    sh:datatype xsd:anyURI; 
    sh:minCount 0;
  ] ;

  sh:property [
    rdfs:label "in AddressBook"@en ;
    rdfs:comment "Indicates that an Individual appears in an AddressBook"@en ;
    rdfs:comment "This property is not part of vCard as defined by the IETF"@en ;
    sh:path vcard:inAddressBook ; ## Inverse
    sh:datatype xsd:anyURI; 
    a sh:FollowMe; # Loadme before continuing...
    sh:minCount 1;
    sh:maxCount 1;
  ] .



# Reference: ../data/raw/shacl/SolidOS_contacts_pane_shapes_contacts_shapes_ttl.ttl
