@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#>.
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#>.

@prefix es:  <https://solid.github.io/shapes/Email#> .


<> rdfs:label "Shape file for VCARD data in Solid";
.


############################################################
# Email SHACL Shapes
############################################################


# Reference
#  ../data/raw/shacl/SolidOS_contacts_pane_shapes_contacts_shapes_ttl.ttl
#  https://github.com/SolidOS/contacts-pane/blob/main/src/ontology/forms.ttl

es:EmailShape a sh:NodeShape ;
    sh:targetObjectsOf vcard:hasEmail;
    rdfs:label "Email Shape"@en ;
    rdfs:comment "SHACL shape describing the structure of an email contact node including its value and optional classification type."@en ;

    sh:property
        [
            sh:path vcard:value ;
            sh:pattern "^mailto:" ;    # starts with mailto
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:string ;
            rdfs:label "Email Address"@en ;
            rdfs:comment "The email address value (e.g., user@example.org)."@en
        ],
        [
            sh:path rdf:type ;
            sh:minCount 0 ;
            sh:maxCount 1 ;
            rdfs:label "Email Type"@en ;
            rdfs:comment "The classification of the email (e.g., home or work)."@en
        ] .


############################################################
# Property Shape for Linking Email to a Contact

############################################################

es:HasEmailPropertyShape
    a sh:PropertyShape ;
    rdfs:label "Has Email Property Shape"@en ;
    rdfs:comment "Defines the constraint for linking a contact to one or more email nodes."@en ;

    sh:path vcard:hasEmail ;
    sh:minCount 0 ;
    sh:node es:EmailShape .


