@prefix rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh:   <http://www.w3.org/ns/shacl#> .
@prefix xsd:  <http://www.w3.org/2001/XMLSchema#> .
@prefix flow: <http://www.w3.org/2005/01/wf/flow#> .
@prefix ical: <http://www.w3.org/2002/12/cal/ical#> .
@prefix ui:   <http://www.w3.org/ns/ui#> .
@prefix cps:  <https://solid.github.io/shapes/ChatParticipation#> .
@prefix solid: <http://www.w3.org/ns/solid/terms#> .

# Ontology-level description
<> 
    rdfs:label "Solid Chat Participation Shapes" ;
    rdfs:comment "This file defines SHACL validation rules for Solid Chat participation objects." .

################ Participation objects

cps:ParticipationShape a sh:NodeShape ;
    rdfs:label "Participation Shape" ;
    rdfs:comment "SHACL NodeShape defining constraints for a participant in a Solid Chat." ;
    sh:targetObjectsOf flow:participation ;
    sh:property
        [ sh:path ical:dtstart ;
          sh:datatype xsd:dateTime ;
          sh:minCount 1 ;
          sh:maxCount 1 ;
          rdfs:label "Start Date" ;
          rdfs:comment "The date and time when the participation started." 
        ],
        [ sh:path flow:participant ;
          sh:minCount 1 ;
          sh:maxCount 1 ;
          rdfs:label "Participant" ;
          rdfs:comment "The agent or person participating in the chat." 
        ],
        [ sh:path solid:colorizeByAuthor ;
          sh:datatype xsd:boolean ;
          sh:maxCount 1 ;
          rdfs:label "Colorize By Author" ;
          rdfs:comment "Indicates if messages from this participant should be colorized by author." 
        ],
        [ sh:path solid:expandImagesInline ;
          sh:datatype xsd:boolean ;
          sh:minCount 0 ;
          sh:maxCount 1 ;
          rdfs:label "Expand Images Inline" ;
          rdfs:comment "Indicates if images should be displayed inline for this participant." 
        ],
        [ sh:path solid:inlineImageHeightEms ;
          sh:datatype xsd:integer ;
          sh:minCount 0 ;
          sh:maxCount 1 ;
          rdfs:label "Inline Image Height (ems)" ;
          rdfs:comment "Preferred height of inline images in em units for this participant." 
        ],
        [ sh:path solid:newestFirst ;
          sh:datatype xsd:boolean ;
          sh:minCount 0 ;
          sh:maxCount 1 ;
          rdfs:label "Newest First" ;
          rdfs:comment "If true, messages are displayed newest first for this participant." 
        ],
        [ sh:path ui:backgroundColor ;
          sh:datatype xsd:string ;
          sh:minCount 0 ;
          sh:maxCount 1 ;
          sh:pattern "#[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]" ;
          rdfs:label "Background Color" ;
          rdfs:comment "Preferred background color for the participant in hexadecimal format." 
        ] .

################ Property Annotations

# flow:participation property
flow:participation a rdf:Property ;
    rdfs:label "Participation" ;
    rdfs:comment "Links a chat channel to its participants." .

# flow:participant property
flow:participant a rdf:Property ;
    rdfs:label "Participant" ;
    rdfs:comment "The agent or person participating in a chat." .

# ical:dtstart property
ical:dtstart a rdf:Property ;
    rdfs:label "Start Date" ;
    rdfs:comment "Start date and time for an event or participation." .

# solid:colorizeByAuthor property
solid:colorizeByAuthor a rdf:Property ;
    rdfs:label "Colorize By Author" ;
    rdfs:comment "Indicates if messages should be color-coded by author." .

# solid:expandImagesInline property
solid:expandImagesInline a rdf:Property ;
    rdfs:label "Expand Images Inline" ;
    rdfs:comment "Specifies if images should be expanded inline in the UI." .

# solid:inlineImageHeightEms property
solid:inlineImageHeightEms a rdf:Property ;
    rdfs:label "Inline Image Height (ems)" ;
    rdfs:comment "Height in em units for displaying inline images." .

# solid:newestFirst property
solid:newestFirst a rdf:Property ;
    rdfs:label "Newest First" ;
    rdfs:comment "Whether messages should be displayed with newest first." .

# ui:backgroundColor property
ui:backgroundColor a rdf:Property ;
    rdfs:label "Background Color" ;
    rdfs:comment "Preferred background color in hexadecimal format." .
